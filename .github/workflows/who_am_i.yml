on:
  schedule:
    - cron: '0/5 * * * *'
  push:
    branches:
      - main

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      
      - name: Get current time
        uses: josStorer/get-current-time@v2.0.1
        id: current-time
        with:
          format: YYYYMMDD-HH
          utcOffset: "+08:00"

      - name: Create file
      - uses: 1arp/create-a-file-action@0.2
        env:
          TIME: "${{ steps.current-time.outputs.time }}"
          R_TIME: "${{ steps.current-time.outputs.readableTime }}"
          F_TIME: "${{ steps.current-time.outputs.formattedTime }}"
          YEAR: "${{ steps.current-time.outputs.year }}"
          DAY: "${{ steps.current-time.outputs.day }}"
        with:
          file: 'who_am_i.md'
          content: |
            #For now $F_TIME I am Daniel Pustotin
            ##@heartsker
            ##daniel.pustotin@gmail.com
        
      - name: Updated who_am_i.md
        run: |
          if [[ "$(git status --porcelain)" != "" ]]; then
          git config user.name heartsker
          git config user.email heartsker@gmail.com
          git add .
          git commit -m "Updated who_am_i.md $(date +'at %l:%M %p on %v')"
          git push
          fi
